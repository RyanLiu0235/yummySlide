!function(a){function t(a){if(null===a)return 0;var t,n=0;for(t in a)a.hasOwnProperty(t)&&n++;return n}function n(){c.params.w=c.params.isForward?-a(window).width():a(window).width(),c.params.h=c.params.isForward?-a(window).height():a(window).height()}function e(a){return r()?a.pageY:a.pageX}function r(){return"vertical"===c.opts.direction}function s(a){if(0===a)return!!c.params.nextPage&&(c.params.nextPage=null);var t=c.params,n=t.page,e=t.order,r=t.pageIndex,s=t.pageLength,p=c.opts.loop,d=s-1;return a<0?t.nextPage=r==d?p?n.eq(e[0]):null:n.eq(e[r+1]):t.nextPage=0==r?p?n.eq(e[d]):null:n.eq(e[r-1]),null===t.nextPage?t.startPos=0:(t.nextPage.show(),t.isForward=i(),o(t))}function o(a){r()?a.nextPage.css({top:a.isForward?"100%":"-100%"}):a.nextPage.css({left:a.isForward?"100%":"-100%"})}function i(){return c.params.curPos<c.params.startPos}a.fn.yummySlide=function(a){return new c(this,a)};var c=function(t,n){c.params.slide=t,c.params.container=a(t).find(".container"),c.params.page=a(t).find(".container .page"),c.params.pageLength=a(t).find(".container .page").length,c.opts=a.extend({},c.option,n),this.init()};c.prototype.init=function(){var a=(c.opts.loop,c.opts.direction,c.opts.mode),t=c.opts.order,n=[];if("sequential"===t)for(var e=0,r=c.params.pageLength;e<r;e++)n.push(e);else if("reverse"===t)for(var e=c.params.pageLength;e>=0;--e)n.push(e);else if("object"==typeof t){if(t.length!==c.params.pageLength)return;n=t}c.method=new p(a),c.params.pageIndex=0,c.params.order=n,this.styleInit(),this.bindEvent()},c.option={loop:!1,order:"sequential",direction:"vertical",mode:"scale",loadFn:null,init:null,custom:null};var p=function(a){var t;switch(a){case"normal":t=p.normal;break;case"cover":t=p.cover;break;case"fade":t=p.fade;break;case"scale":t=p.scale;break;default:t=p.scale}p.prototype.transNext=t.transNext,p.prototype.transSucceed=t.transSucceed,p.prototype.transFail=t.transFail};c.params={slide:null,container:null,page:null,order:[],pageLength:void 0,curPage:null,nextPage:null,pageIndex:0,startPos:void 0,curPos:void 0,isAnimating:!1,isTap:!0,h:void 0,w:void 0,isForward:0},c.prototype.styleInit=function(){var a=c.params.container,n=c.params.slide,e=c.params.page,r=c.params.order,s=c.params.pageLength;if(n.css({width:"100%",height:"100%"}),a.css({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),e.css({display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%","z-index":2}),c.params.curPage=e.eq(r[0]),curPage=c.params.curPage,curPage.show().css({"z-index":10}),d(curPage),t(c.opts.loadFn)){var o=c.opts.loadFn[0]?c.opts.loadFn[0]:null;t(o)&&o.forEach(function(a,t){var n=a.fn,e=a.arguments?a.arguments:null,r=a.delay?a.delay:void 0;isNaN(r)?setTimeout(function(){n.apply(this,e)},r):n.apply(this,e)})}for(var i=s,p=0;p<i;p++)e.eq(r[p]).attr("data-order",p);a.show(),!!c.opts.init&&c.opts.init()},c.prototype.bindEvent=function(){var t=this,n=c.params.container;a(document).on("touchmove",function(a){a.preventDefault()});var e=c.opts.custom?c.opts.custom:null;!!e&&function(){for(var n=e.length-1;n>=0;n--){var r=e[n].obj,s=e[n].trigger;r.each(function(){a(this).on(s,function(a){t.customMove()})})}}(),n.on("touchstart",t.start).on("touchmove",t.move).on("touchend touchcancel",t.end)};var d=function(t){t.find("[data-animation]").each(function(){a(this).addClass(a(this).data("animation"))})},l=function(t){t.find("[data-animation]").each(function(){a(this).removeClass(a(this).data("animation"))})};c.prototype.customMove=function(){if(!c.params.isAnimating){var a=c.params,t=a.page,n=a.pageIndex,e=a.pageLength,r=a.order;a.isForward=!0,a.curPage=t.eq(r[n]),n<e-1?(a.nextPage=t.eq(r[n+1]),a.nextPage.show(),o(c.params),a.isAnimating=!0,c.method.transSucceed(a.curPage,a.nextPage,0)):a.isForward=a.nextPage=null}},c.prototype.start=function(a){if(!c.params.isAnimating){var t=c.params,n=t.page,r=window.Zepto?a.changedTouches[0]:a.originalEvent.touches[0];t.startPos=e(r),t.curPage=n.eq(t.order[t.pageIndex])}},c.prototype.move=function(a){if(!c.params.isAnimating&&c.params.startPos){a.preventDefault(),c.params.isTap=!1;var t=window.Zepto?a.changedTouches[0]:a.originalEvent.touches[0],n=e(t),r=c.params,o=r.startPos,p=(r.curPos,r.curPage),d=n-o;d<0&&p.hasClass("pause")||(i()===r.isForward&&0!==r.isForward&&null!==r.isForward||s(d),$nextPage=c.params.nextPage,$nextPage&&(r.curPos=n,c.method.transNext(p,$nextPage,d)))}},c.prototype.end=function(a){if(c.params.isAnimating||c.params.isTap||!c.params.nextPage||!c.params.startPos)return c.params.startPos=void 0;var t=c.params,n=t.startPos,e=t.curPos,r=t.curPage,s=t.nextPage;t.isTap=!0,t.isAnimating=!0;var o=e-n;Math.abs(o)>30?c.method.transSucceed(r,s,o):c.method.transFail(r,s)},a.fn.emulateTransitionEnd=function(t){var n=!1,e=this;a(this).one("webkitTransitionEnd",function(){n=!0});var r=function(){n||a(e).trigger("webkitTransitionEnd")};setTimeout(r,t)};var u=function(){var a=window.document,t=a.body||a.documentElement,n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in n)if(void 0!==t.style[e])return n[e]}();p._transNext=function(a,t,n,e){a.css({"-webkit-transform":n,transform:n,"z-index":8}),t.css({"-webkit-transform":e,transform:e,"z-index":10})},p._transSucceed=function(a,n,e,r,s){a.css({"-webkit-transform":e,transform:e,"-webkit-transition":"0.9s",transition:"0.9s"}),n.css({"-webkit-transform":r,transform:r,"-webkit-transition":"0.9s",transition:"0.9s"}),n.one(u,function(){a.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":2}).hide(),n.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":10}),d(n),l(a),s.isForward&&a.hasClass("pause")&&a.removeClass("pause"),s.curPage=n;var e=s.pageLength-1;switch(s.pageIndex){case 0:s.pageIndex=s.isForward?s.pageIndex+1:e;break;case e:s.pageIndex=s.isForward?0:s.pageIndex-1;break;default:s.pageIndex+=s.isForward?1:-1}var r=s.pageIndex;if(t(c.opts.loadFn)){var o=c.opts.loadFn[r]?c.opts.loadFn[r]:null;t(o)&&o.forEach(function(a,t){var n=a.fn,e=a.arguments?a.arguments:null,r=a.delay?a.delay:void 0;isNaN(r)?setTimeout(function(){n.apply(this,e)},r):n.apply(this,e)})}setTimeout(function(){s.isAnimating=s.nextPage=s.startPos=s.curPos=s.isForward=null},20)}).emulateTransitionEnd(910)},p._transFail=function(a,t,n){a.css({"-webkit-transform":"translate3d(0, 0, 0) scale(1)",transform:"translate3d(0, 0, 0) scale(1)","-webkit-transition":"0.9s",transition:"0.9s"}),t.css({"-webkit-transform":"translate3d(0, 0, 0) scale(1)",transform:"translate3d(0, 0, 0) scale(1)","-webkit-transition":"0.9s",transition:"0.9s"}),t.one(u,function(){a.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":10}),t.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":2}).hide(),setTimeout(function(){n.isAnimating=n.nextPage=n.startPos=n.curPos=n.isForward=null},20)}).emulateTransitionEnd(950)},p.normal={transNext:function(a,t,n){var e=_nextTrans=r()?"translate3d(0, "+n+"px, 0)":"translate3d("+n+"px, 0, 0)";p._transNext(a,t,e,_nextTrans)},transSucceed:function(a,t,e){var s=c.params;n();var o=_nextTrans=r()?"translate3d(0, "+s.h+"px, 0)":"translate3d("+s.w+"px, 0, 0)";p._transSucceed(a,t,o,_nextTrans,s)},transFail:function(a,t){var n=c.params;p._transFail(a,t,n)}},p.scale={transNext:function(t,n,e){var s=r()?1-Math.abs(e)/a(window).height():1-Math.abs(e)/a(window).width();t.css({"-webkit-transform-origin":c.params.isForward?r()?"center bottom":"right center":r()?"center top":"left center","transform-origin":c.params.isForward?r()?"center bottom":"right center":r()?"center top":"left center"});var o=r()?"translate3d(0, "+e+"px, 0) scale("+Math.sqrt(s)+")":"translate3d("+e+"px, 0, 0) scale("+Math.sqrt(s)+")",i=r()?"translate3d(0, "+e+"px, 0) scale(1)":"translate3d("+e+"px, 0, 0) scale(1)";p._transNext(t,n,o,i)},transSucceed:function(t,e,s){var o=c.params,i=r()?1-Math.abs(s)/a(window).height():1-Math.abs(s)/a(window).width();n();var d=r()?"translate3d(0, "+o.h+"px, 0) scale("+Math.sqrt(i)+")":"translate3d("+o.w+"px, 0, 0) scale("+Math.sqrt(i)+")",l=r()?"translate3d(0, "+o.h+"px, 0) scale(1)":"translate3d("+o.w+"px, 0, 0) scale(1)";p._transSucceed(t,e,d,l,o)},transFail:function(a,t){var n=c.params;p._transFail(a,t,n)}},p.fade={transNext:function(t,n,e){var s=r()?1-Math.abs(e)/a(window).height():1-Math.abs(e)/a(window).width(),o=_nextTrans=r()?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";t.css("opacity",Math.pow(s,2)),n.css("opacity",1.5-s),p._transNext(t,n,o,_nextTrans)},transSucceed:function(a,t,e){var s=c.params;n();var o=_nextTrans=r()?"translate3d(0, "+s.h+"px, 0)":"translate3d("+s.w+"px, 0, 0)";a.css("opacity",0),t.css("opacity",1),p._transSucceed(a,t,o,_nextTrans,s)},transFail:function(a,t){var n=c.params;a.css("opacity",1),t.css("opacity",0),p._transFail(a,t,n)}},p.cover={transNext:function(a,t,n){var e=r()?"translate3d(0, "+n+"px, 0)":"translate3d("+n+"px, 0, 0)";p._transNext(a,t,"none",e)},transSucceed:function(a,t,e){var s=c.params;n();_nextTrans=r()?"translate3d(0, "+s.h+"px, 0)":"translate3d("+s.w+"px, 0, 0)";p._transSucceed(a,t,"none",_nextTrans,s)},transFail:function(a,t){var n=c.params;p._transFail(a,t,n)}}}(window.jQuery||window.Zepto);