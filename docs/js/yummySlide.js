!function(a){function t(){i.params.w=i.params.isForward?-a(window).width():a(window).width(),i.params.h=i.params.isForward?-a(window).height():a(window).height()}function n(a){return e()?a.pageY:a.pageX}function e(){return"vertical"===i.opts.direction}function r(a){if(0===a)return!!i.params.nextPage&&(i.params.nextPage=null);var t=i.params,n=t.page,e=t.order,r=t.pageIndex,c=t.pageLength,p=i.opts.loop,d=c-1;return a<0?t.nextPage=r==d?p?n.eq(e[0]):null:n.eq(e[r+1]):t.nextPage=0==r?p?n.eq(e[d]):null:n.eq(e[r-1]),null===t.nextPage?t.startPos=0:(t.nextPage.show(),t.isForward=o(),s(t))}function s(a){e()?a.nextPage.css({top:a.isForward?"100%":"-100%"}):a.nextPage.css({left:a.isForward?"100%":"-100%"})}function o(){return i.params.curPos<i.params.startPos}a.fn.yummySlide=function(a){return new i(this,a)};var i=function(t,n){i.params.slide=t,i.params.container=a(t).find(".container"),i.params.page=a(t).find(".container .page"),i.params.pageLength=a(t).find(".container .page").length,i.opts=a.extend({},i.option,n),this.init()};i.prototype.init=function(){var a=(i.opts.loop,i.opts.direction,i.opts.mode),t=i.opts.order,n=[];if("sequential"===t)for(var e=0,r=i.params.pageLength;e<r;e++)n.push(e);else if("reverse"===t)for(var e=i.params.pageLength;e>=0;--e)n.push(e);else if("object"==typeof t){if(t.length!==i.params.pageLength)return;n=t}i.method=new c(a),i.params.pageIndex=0,i.params.order=n,this.styleInit(),this.bindEvent()},i.option={loop:!1,order:"sequential",direction:"vertical",mode:"scale",loadFn:null,init:null,custom:null};var c=function(a){var t;switch(a){case"normal":t=c.normal;break;case"cover":t=c.cover;break;case"fade":t=c.fade;break;case"scale":t=c.scale;break;default:t=c.scale}c.prototype.transNext=t.transNext,c.prototype.transSucceed=t.transSucceed,c.prototype.transFail=t.transFail};i.params={slide:null,container:null,page:null,order:[],pageLength:void 0,curPage:null,nextPage:null,pageIndex:0,startPos:void 0,curPos:void 0,isAnimating:!1,isTap:!0,h:void 0,w:void 0,isForward:0},i.prototype.styleInit=function(){var a=i.params.container,t=i.params.slide,n=i.params.page,e=i.params.order,r=i.params.pageLength;if(t.css({width:"100%",height:"100%"}),a.css({width:"100%",height:"100%",position:"relative",overflow:"hidden"}),n.css({display:"none",position:"absolute",top:0,left:0,width:"100%",height:"100%","z-index":2}),i.params.curPage=n.eq(e[0]),curPage=i.params.curPage,curPage.show().css({"z-index":10}),p(curPage),i.opts.loadFn){var s=i.opts.loadFn[0]?i.opts.loadFn[0]:null;if(s)for(var o=0,c=s.length;o<c;o++){var d=s[o].fn,l=s[o].arguments,u=s[o].delay?s[o].delay:null;u?d&&setTimeout(function(){d.apply(i,l)},u):d&&d.apply(i,l)}}for(var m=r,o=0;o<m;o++)n.eq(e[o]).attr("data-order",o);a.show(),!!i.opts.init&&i.opts.init()},i.prototype.bindEvent=function(){var t=this,n=i.params.container;a(document).on("touchmove",function(a){a.preventDefault()});var e=i.opts.custom?i.opts.custom:null;!!e&&function(){for(var n=e.length-1;n>=0;n--){var r=e[n].obj,s=e[n].trigger;r.each(function(){a(this).on(s,function(a){t.customMove()})})}}(),n.on("touchstart",t.start).on("touchmove",t.move).on("touchend touchcancel",t.end)};var p=function(t){t.find("[data-animation]").each(function(){a(this).addClass(a(this).data("animation"))})},d=function(t){t.find("[data-animation]").each(function(){a(this).removeClass(a(this).data("animation"))})};i.prototype.customMove=function(){if(!i.params.isAnimating){var a=i.params,t=a.page,n=a.pageIndex,e=a.pageLength,r=a.order;a.isForward=!0,a.curPage=t.eq(r[n]),n<e-1?(a.nextPage=t.eq(r[n+1]),a.nextPage.show(),s(i.params),a.isAnimating=!0,i.method.transSucceed(a.curPage,a.nextPage,0)):a.isForward=a.nextPage=null}},i.prototype.start=function(a){if(!i.params.isAnimating){var t=i.params,e=t.page,r=window.Zepto?a.changedTouches[0]:a.originalEvent.touches[0];t.startPos=n(r),t.curPage=e.eq(t.order[t.pageIndex])}},i.prototype.move=function(a){if(!i.params.isAnimating&&i.params.startPos){a.preventDefault(),i.params.isTap=!1;var t=window.Zepto?a.changedTouches[0]:a.originalEvent.touches[0],e=n(t),s=i.params,c=s.startPos,p=(s.curPos,s.curPage),d=e-c;d<0&&p.hasClass("pause")||(o()===s.isForward&&0!==s.isForward&&null!==s.isForward||r(d),$nextPage=i.params.nextPage,$nextPage&&(s.curPos=e,i.method.transNext(p,$nextPage,d)))}},i.prototype.end=function(a){if(i.params.isAnimating||i.params.isTap||!i.params.nextPage||!i.params.startPos)return i.params.startPos=void 0;var t=i.params,n=t.startPos,e=t.curPos,r=t.curPage,s=t.nextPage;t.isTap=!0,t.isAnimating=!0;var o=e-n;Math.abs(o)>30?i.method.transSucceed(r,s,o):i.method.transFail(r,s)},a.fn.emulateTransitionEnd=function(t){var n=!1,e=this;a(this).one("webkitTransitionEnd",function(){n=!0});var r=function(){n||a(e).trigger("webkitTransitionEnd")};setTimeout(r,t)};var l=function(){var a=window.document,t=a.body||a.documentElement,n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in n)if(void 0!==t.style[e])return n[e]}();c._transNext=function(a,t,n,e){a.css({"-webkit-transform":n,transform:n,"z-index":8}),t.css({"-webkit-transform":e,transform:e,"z-index":10})},c._transSucceed=function(a,t,n,e,r){a.css({"-webkit-transform":n,transform:n,"-webkit-transition":"0.9s",transition:"0.9s"}),t.css({"-webkit-transform":e,transform:e,"-webkit-transition":"0.9s",transition:"0.9s"}),t.one(l,function(){a.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":2}).hide(),t.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":10}),p(t),d(a),r.isForward&&a.hasClass("pause")&&a.removeClass("pause"),r.curPage=t;var n=r.pageLength-1;switch(r.pageIndex){case 0:r.pageIndex=r.isForward?r.pageIndex+1:n;break;case n:r.pageIndex=r.isForward?0:r.pageIndex-1;break;default:r.pageIndex+=r.isForward?1:-1}var e=r.pageIndex;if(i.opts.loadFn){var s=i.opts.loadFn[e]?i.opts.loadFn[e]:null;if(s)for(var o=0,c=s.length;o<c;o++){var l=s[o].fn,u=s[o].arguments,m=s[o].delay?s[o].delay:null;m?l&&setTimeout(function(){l.apply(i,u)},m):l&&l.apply(i,u)}}setTimeout(function(){r.isAnimating=r.nextPage=r.startPos=r.curPos=r.isForward=null},20)}).emulateTransitionEnd(910)},c._transFail=function(a,t,n){a.css({"-webkit-transform":"translate3d(0, 0, 0) scale(1)",transform:"translate3d(0, 0, 0) scale(1)","-webkit-transition":"0.9s",transition:"0.9s"}),t.css({"-webkit-transform":"translate3d(0, 0, 0) scale(1)",transform:"translate3d(0, 0, 0) scale(1)","-webkit-transition":"0.9s",transition:"0.9s"}),t.one(l,function(){a.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":10}),t.css({"-webkit-transform":"none",transform:"none","-webkit-transition":"none",transition:"none",top:0,left:0,"z-index":2}).hide(),setTimeout(function(){n.isAnimating=n.nextPage=n.startPos=n.curPos=n.isForward=null},20)}).emulateTransitionEnd(950)},c.normal={transNext:function(a,t,n){var r=_nextTrans=e()?"translate3d(0, "+n+"px, 0)":"translate3d("+n+"px, 0, 0)";c._transNext(a,t,r,_nextTrans)},transSucceed:function(a,n,r){var s=i.params;t();var o=_nextTrans=e()?"translate3d(0, "+s.h+"px, 0)":"translate3d("+s.w+"px, 0, 0)";c._transSucceed(a,n,o,_nextTrans,s)},transFail:function(a,t){var n=i.params;c._transFail(a,t,n)}},c.scale={transNext:function(t,n,r){var s=e()?1-Math.abs(r)/a(window).height():1-Math.abs(r)/a(window).width();t.css({"-webkit-transform-origin":i.params.isForward?e()?"center bottom":"right center":e()?"center top":"left center","transform-origin":i.params.isForward?e()?"center bottom":"right center":e()?"center top":"left center"});var o=e()?"translate3d(0, "+r+"px, 0) scale("+Math.sqrt(s)+")":"translate3d("+r+"px, 0, 0) scale("+Math.sqrt(s)+")",p=e()?"translate3d(0, "+r+"px, 0) scale(1)":"translate3d("+r+"px, 0, 0) scale(1)";c._transNext(t,n,o,p)},transSucceed:function(n,r,s){var o=i.params,p=e()?1-Math.abs(s)/a(window).height():1-Math.abs(s)/a(window).width();t();var d=e()?"translate3d(0, "+o.h+"px, 0) scale("+Math.sqrt(p)+")":"translate3d("+o.w+"px, 0, 0) scale("+Math.sqrt(p)+")",l=e()?"translate3d(0, "+o.h+"px, 0) scale(1)":"translate3d("+o.w+"px, 0, 0) scale(1)";c._transSucceed(n,r,d,l,o)},transFail:function(a,t){var n=i.params;c._transFail(a,t,n)}},c.fade={transNext:function(t,n,r){var s=e()?1-Math.abs(r)/a(window).height():1-Math.abs(r)/a(window).width(),o=_nextTrans=e()?"translate3d(0, "+r+"px, 0)":"translate3d("+r+"px, 0, 0)";t.css("opacity",Math.pow(s,2)),n.css("opacity",1.5-s),c._transNext(t,n,o,_nextTrans)},transSucceed:function(a,n,r){var s=i.params;t();var o=_nextTrans=e()?"translate3d(0, "+s.h+"px, 0)":"translate3d("+s.w+"px, 0, 0)";a.css("opacity",0),n.css("opacity",1),c._transSucceed(a,n,o,_nextTrans,s)},transFail:function(a,t){var n=i.params;a.css("opacity",1),t.css("opacity",0),c._transFail(a,t,n)}},c.cover={transNext:function(a,t,n){var r=e()?"translate3d(0, "+n+"px, 0)":"translate3d("+n+"px, 0, 0)";c._transNext(a,t,"none",r)},transSucceed:function(a,n,r){var s=i.params;t();_nextTrans=e()?"translate3d(0, "+s.h+"px, 0)":"translate3d("+s.w+"px, 0, 0)";c._transSucceed(a,n,"none",_nextTrans,s)},transFail:function(a,t){var n=i.params;c._transFail(a,t,n)}}}(window.jQuery||window.Zepto);